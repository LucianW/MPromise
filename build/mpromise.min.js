!function(){function t(t){return"function"==typeof t}function e(t){return"object"==typeof t}function r(e,r){var n;try{e(function(e){if(n===!1)return!1;n=!0;for(var o=0;o<r.length;o++)if(t(r[o].resolve))try{var u=r[o].resolve(e);r[o].onResolve(u)}catch(i){r[o].onReject(u)}return!0},function(e){if(n===!0)return!1;n=!1;for(var o=0;o<r.length;o++)if(t(r[o].reject))try{var u=r[o].reject(e);r[o].onResolve(u)}catch(i){r[o].onReject(u)}return!0})}catch(o){if(n===!0)return;n=!1;for(var u=0;u<r.length;u++)t(r[u].reject)&&r[u].reject(o)}}function n(e,r,n,o,u){for(var i=0;i<e.length;i++)if(t(e[i].resolve)&&t(r)&&e[i].resolve===r||t(e[i].reject)&&t(n)&&e[i].reject===n)return;e.push({resolve:r,reject:n,onResolve:o,onReject:u})}function o(n){var o=this;if(!e(this))throw new TypeError("Promises must be constructed via new");if(!t(n))throw new TypeError("not a function");return this.listeners=[],setTimeout(function(){r(n,o.listeners)},1),this}function u(t,e,r,n,o){return function(u){r[t].status=1===e,r[t].value=u;for(var i=r.map(function(t){return t.value}),c=0;c<r.length;c++){if(null===r[c].status)return;if(r[c].status===!1)return void o(i)}n(i)}}var i,c=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};i=e(window)&&window?window:global,o.prototype.then=function(t,e){var r=this;return new MPromise(function(o,u){n(r.listeners,t,e,o,u)})},o.prototype["catch"]=function(t){var e=this;return new MPromise(function(r,o){n(e.listeners,null,t,r,o)})},o.all=function(){var t=Array.prototype.slice.call(1===arguments.length&&c(arguments[0])?arguments[0]:arguments);return 0===t.length?Error("insufficient arguments"):1===t.length?t[0]:new o(function(e,r){for(var n=[],o=0;o<t.length;o++)n[o]={status:null,value:null},t[o].then(u(o,1,n,e,r),u(o,2,n,e,r))})},i.MPromise||(i.MPromise=o)}();