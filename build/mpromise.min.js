!function(){function t(t){return"function"==typeof t}function n(t){return"object"==typeof t}function e(n,e){var r=e.listeners;try{n(function(n){if(e.lastAction.type===!1)return!1;e.lastAction.type=!0,e.lastAction.data=n;for(var o=0;o<r.length;o++)if(t(r[o].resolve))try{var i=r[o].resolve(n);r[o].onResolve(i)}catch(a){r[o].onReject(i)}return!0},function(n){if(e.lastAction.type===!0)return!1;e.lastAction.type=!1,e.lastAction.data=n;for(var o=0;o<r.length;o++)if(t(r[o].reject))try{var i=r[o].reject(n);r[o].onResolve(i)}catch(a){r[o].onReject(i)}return!0})}catch(o){if(e.lastAction.type===!0)return;e.lastAction.type=!1,e.lastAction.data=o;for(var i=0;i<r.length;i++)t(r[i].reject)&&r[i].reject(o)}}function r(n,e,r,o){for(var i=this.listeners,a=0;a<i.length;a++)if(t(i[a].resolve)&&t(n)&&i[a].resolve===n||t(i[a].reject)&&t(e)&&i[a].reject===e)return;i.push({resolve:n,reject:e,onResolve:r,onReject:o})}function o(r){var o=this;if(!n(this))throw new TypeError("MPromises must be constructed via new");if(!t(r))throw new TypeError("not a function");return this.listeners=[],this.lastAction={type:null,data:null},setTimeout(function(){e(r,o)},1),this}function i(t,n,e,r,o){return function(i){e[t].status=1===n,e[t].value=i;for(var a=e.map(function(t){return t.value}),c=0;c<e.length;c++){if(null===e[c].status)return;if(e[c].status===!1)return void o(a)}r(a)}}var a,c=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};a=n(window)&&window?window:global,o.prototype.then=function(n,e){var i=this;return setTimeout(function(){i.lastAction.type===!0&&t(n)?n(i.lastAction.data):i.lastAction.type===!1&&t(e)&&e(i.lastAction.data)},1),new o(function(t,o){r.call(i,n,e,t,o)})},o.prototype["catch"]=function(n){var e=this;return setTimeout(function(){e.lastAction.type===!1&&t(n)&&n(e.lastAction.data)},1),new o(function(t,o){r.call(e,null,n,t,o)})},o.all=function(){var t=Array.prototype.slice.call(1===arguments.length&&c(arguments[0])?arguments[0]:arguments);return 0===t.length?Error("insufficient arguments"):1===t.length?t[0]:new o(function(n,e){for(var r=[],o=0;o<t.length;o++)r[o]={status:null,value:null},t[o].then(i(o,1,r,n,e),i(o,2,r,n,e))})},a.MPromise||(a.MPromise=o)}();