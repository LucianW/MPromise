!function(){function t(t){return"function"==typeof t}function r(t){return"object"==typeof t}function e(r,e){var n;try{r(function(r){if(n===!1)return!1;n=!0;for(var o=0;o<e.length;o++)t(e[o].resolve)&&e[o].resolve(r);return!0},function(r){if(n===!0)return!1;n=!1;for(var o=0;o<e.length;o++)t(e[o].reject)&&e[o].reject(r);return!0})}catch(o){if(n===!0)return;n=!1;for(var u=0;u<e.length;u++)t(e[u].reject)&&e[u].reject(o)}}function n(r,e,n){for(var o=0;o<r.length;o++)if(t(r[o].resolve)&&t(e)&&r[o].resolve===e||t(r[o].reject)&&t(n)&&r[o].reject===n)return;r.push({resolve:e,reject:n})}function o(n){var o=this;if(!r(this))throw new TypeError("Promises must be constructed via new");if(!t(n))throw new TypeError("not a function");return this.listeners=new Array,setTimeout(function(){e(n,o.listeners)},1),this}function u(t,r,e,n,o){return function(u){e[t].status=1===r,e[t].value=u;for(var i=e.map(function(t){return t.value}),s=0;s<e.length;s++){if(null===e[s].status)return;if(e[s].status===!1)return void o(i)}n(i)}}var i;i=r(window)&&window?window:global,o.prototype.then=function(t,r){n(this.listeners,t,r)},o.prototype["catch"]=function(t){n(this.listeners,null,t)},o.all=function(){var t=Array.prototype.slice.call(1===arguments.length&&isArray(arguments[0])?arguments[0]:arguments);return 0===t.length?Error("insufficient arguments"):1===t.length?t[0]:new o(function(r,e){for(var n=new Array,o=0;o<t.length;o++)n[o]={status:null,value:null},t[o].then(u(o,1,n,r,e),u(o,2,n,r,e))})},i.MPromise||(i.MPromise=o)}();