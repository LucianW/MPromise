!function(){function t(t){return"function"==typeof t}function r(t){return"object"==typeof t}function e(r,e){var n;try{r(function(r){if(n===!1)return!1;n=!0;for(var o=0;o<e.length;o++)if(t(e[o].resolve))try{var u=e[o].resolve(r);e[o].onResolve(u)}catch(i){e[o].onReject(u)}return!0},function(r){if(n===!0)return!1;n=!1;for(var o=0;o<e.length;o++)if(t(e[o].reject))try{var u=e[o].reject(r);e[o].onResolve(u)}catch(i){e[o].onReject(u)}return!0})}catch(o){if(n===!0)return;n=!1;for(var u=0;u<e.length;u++)t(e[u].reject)&&e[u].reject(o)}}function n(r,e,n,o){for(var u=this.listeners,i=0;i<u.length;i++)if(t(u[i].resolve)&&t(r)&&u[i].resolve===r||t(u[i].reject)&&t(e)&&u[i].reject===e)return;u.push({resolve:r,reject:e,onResolve:n,onReject:o})}function o(n){var o=this;if(!r(this))throw new TypeError("Promises must be constructed via new");if(!t(n))throw new TypeError("not a function");return this.listeners=[],setTimeout(function(){e(n,o.listeners)},1),this}function u(t,r,e,n,o){return function(u){e[t].status=1===r,e[t].value=u;for(var i=e.map(function(t){return t.value}),c=0;c<e.length;c++){if(null===e[c].status)return;if(e[c].status===!1)return void o(i)}n(i)}}var i,c=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};i=r(window)&&window?window:global,o.prototype.then=function(t,r){var e=this;return new o(function(o,u){n.call(e,t,r,o,u)})},o.prototype["catch"]=function(t){var r=this;return new o(function(e,o){n.call(r,null,t,e,o)})},o.all=function(){var t=Array.prototype.slice.call(1===arguments.length&&c(arguments[0])?arguments[0]:arguments);return 0===t.length?Error("insufficient arguments"):1===t.length?t[0]:new o(function(r,e){for(var n=[],o=0;o<t.length;o++)n[o]={status:null,value:null},t[o].then(u(o,1,n,r,e),u(o,2,n,r,e))})},i.MPromise||(i.MPromise=o)}();